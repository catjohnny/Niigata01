<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Êñ∞ÊΩüÂ•¢ËèØ‰πãÊóÖ 2026</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    
    <!-- React & ReactDOM (UMD) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel Standalone (for compiling JSX in browser) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              gold: {
                400: '#D4AF37',
                500: '#C5A028',
                600: '#B4901E',
              },
              luxury: {
                black: '#121212',
                charcoal: '#1E1E1E',
                gray: '#2C2C2C',
              }
            },
            fontFamily: {
              serif: ['"Playfair Display"', 'serif'],
              sans: ['"Lato"', 'sans-serif'],
            }
          }
        }
      }
    </script>
    <style>
      body {
        background-color: #121212;
        color: #F3F4F6;
        -webkit-font-smoothing: antialiased;
        overscroll-behavior-y: none; /* Prevent pull-to-refresh on mobile */
      }
      /* Custom Scrollbar for Webkit */
      ::-webkit-scrollbar {
        width: 6px;
      }
      ::-webkit-scrollbar-track {
        background: #1E1E1E; 
      }
      ::-webkit-scrollbar-thumb {
        background: #D4AF37; 
        border-radius: 3px;
      }
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .pb-safe {
        padding-bottom: env(safe-area-inset-bottom);
      }
      /* Animation for Weather Widget */
      @keyframes slideUp {
          from { transform: translateY(100%); }
          to { transform: translateY(0); }
      }
      .weather-modal-content {
           animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "vite": "https://aistudiocdn.com/vite@^7.2.6",
    "@vitejs/plugin-react": "https://aistudiocdn.com/@vitejs/plugin-react@^5.1.1"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      // --- CONSTANTS & DATA ---
      
      const GUIDE_LOCATIONS = [
        {
            id: 'airport',
            title: 'Êñ∞ÊΩüÊ©üÂ†¥ (KIJ)',
            subtitle: '‰∫§ÈÄöÊé•ÈßÅË≥áË®ä',
            description: `„ÄêÊé•ÈßÅËªäÊôÇÂàªË°®„Äë
ÂæûÊñ∞ÊΩüÊ©üÂ†¥Âá∫Áôº ‚Üì ÊäµÈÅîÊñ∞ÊΩüËªäÁ´ô

‚Ä¢ 18:00 (Â§ßÂ∑¥) ‚Üí 18:23
‚Ä¢ 18:20 (ÂÖ¨Ëªä) ‚Üí 18:49
‚Ä¢ 18:30 (Â§ßÂ∑¥) ‚Üí 18:53
‚Ä¢ 18:55 (Â§ßÂ∑¥) ‚Üí 19:18
‚Ä¢ 19:05 (ÂÖ¨Ëªä) ‚Üí 19:32
‚Ä¢ 19:15 (ÂÖ¨Ëªä) ‚Üí 19:42
‚Ä¢ 19:45 (Â§ßÂ∑¥) ‚Üí 20:08
‚Ä¢ 20:25 (ÂÖ¨Ëªä) ‚Üí 20:52
‚Ä¢ 20:35 (Â§ßÂ∑¥) ‚Üí 20:58
‚Ä¢ 20:45 (ÂÖ¨Ëªä) ‚Üí 21:12
‚Ä¢ 21:10 (Â§ßÂ∑¥) ‚Üí 21:33`,
            imagePlaceholder: 'https://picsum.photos/id/1059/800/600',
            details: [
                { label: 'ËªäË≥á', value: 'Â§ßÂ∑¥(Áõ¥ÈÅî) / ÂÖ¨Ëªä(ÂêÑÂÅú)' },
                { label: 'ÊîØ‰ªò', value: 'ÁèæÈáë / ICÂç°' }
            ]
        },
        {
            id: 'niigata_daiichi',
            title: 'Êñ∞ÊΩüÁ¨¨‰∏ÄÈ£ØÂ∫ó',
            subtitle: 'Niigata Daiichi Hotel',
            description: `üìç B1F (Âú∞‰∏ã‰∏ÄÊ®ì)
‚ô®Ô∏è Â§ßÊµ¥Â†¥ („Åø„Å™„Å®„ÅÆÊπØ)Ôºö
‚Ä¢ Ë®≠ÊúâÁî∑ÊÄßÂ§ßÊµ¥Â†¥ËàáÂ•≥ÊÄßÂ§ßÊµ¥Â†¥„ÄÇ
‚Ä¢ Â•≥ÊÄßÊµ¥Â†¥ÈúÄÂ∞àÁî®Èë∞Âåô„ÄÇ
‚Ä¢ ÁáüÊ•≠ÊôÇÈñìÔºö15:00 - 02:00 (Ê∑±Â§ú) / 05:00 - 09:30„ÄÇ

üìç 1F (‰∏ÄÊ®ì)
ÊúçÂãôË®≠ÊñΩÔºö
‚Ä¢ Ê´ÉÊ™ØËàáÂ§ßÂª≥„ÄÅ‰øùÂÖ®ÁΩÆÁâ©Ê´É„ÄÅAED„ÄÇ
‚Ä¢ ÂÖçË≤ªÂÇôÂìÅÂçÄ (Ëá™Áî±ÂèñÁî®ÔºåÂê´Â•≥ÊÄßÂ∞àÁî®ÂÇôÂìÅ)„ÄÇ
‚Ä¢ Ê´ÉÊ™ØÊèê‰æõÁßüÂÄüÔºöÊâãÊ©üÂÖÖÈõªÂô®„ÄÅÁÜ®Êñó„ÄÅË£ÅÁ∏´ÁµÑ„ÄÇ
ÂïÜÂ∫ó/ÊúçÂãôÔºö
üè™ ‰æøÂà©ÂïÜÂ∫ó (LAWSON)Ôºö ËàáÈ£ØÂ∫óÂ§ßÂª≥Áõ¥ÈÄö„ÄÇ
üö≤ Ëá™Ë°åËªäÁßüË≥ÉÔºö ÊØèÊ¨° 500 Êó•Âúì (ÈúÄË≠â‰ª∂)„ÄÇ

üìç 2F (‰∫åÊ®ì)
üç¥ Êó©È§êÊúÉÂ†¥ (mahoro)
‚Ä¢ Â§öÂäüËÉΩÂÆ§ (201„ÄÅ202)
üö¨ Âê∏Ëè∏ÂÆ§

üìç 3F (‰∏âÊ®ì)
Â®õÊ®Ç/‰ºëÊÜ©Ôºö
üìö Êº´Áï´ÂÆ§Ôºö ËóèÊõ∏Ë∂ÖÈÅé 15,000 ÂÜäÔºåË®≠Êúâ‰ªòË≤ªÊåâÊë©Ê§Ö (200Êó•Âúì)„ÄÇ
ÂØ¶Áî®Ë®≠ÊñΩÔºö
‚Ä¢ Ê¥óË°£Êàø („É©„É≥„Éâ„É™„Éº)ÔºöÊäïÂπ£ÂºèÊ¥óË°£Ê©ü„ÄÅÁÉò‰πæÊ©üÔºåË®≠ÊúâÂ•≥ÊÄßÂ∞àÁî®Ê¥óË°£Êàø„ÄÇ
   (Ê¥óË°£ 30ÂàÜ 300ÂÜÜ / ÁÉò‰πæ 30ÂàÜ 100ÂÜÜ)
üöø Â•≥ÊÄßÂ∞àÁî®Ê∑ãÊµ¥Èñì (ÈúÄÈë∞Âåô)„ÄÇ
‚Ä¢ ÁÑ°ÈöúÁ§ôÂªÅÊâÄ„ÄÇ
‚Ä¢ Ëá™ÂãïË≤©Ë≥£Ê©ü„ÄÅË£ΩÂÜ∞Ê©ü„ÄÅÂæÆÊ≥¢Áàê`,
            imagePlaceholder: 'https://picsum.photos/id/1031/800/600',
            details: [
                { label: 'MapCode', value: 'Google Maps' },
                { label: '‰æøÂà©ÂïÜÂ∫ó', value: 'Lawson (1FÁõ¥ÈÄö)' }
            ]
        },
        {
             id: 'xebio',
             title: 'XEBIO ÈÅãÂãïÂø´Á∑ö',
             subtitle: 'Êñ∞ÊΩüËªäÁ´ôÂ∫ó',
             description: `„Çº„Éì„Ç™„Çπ„Éù„Éº„ÉÑ„Ç®„ÇØ„Çπ„Éó„É¨„Çπ Êñ∞ÊΩüÈßÖÂ∫ó
             
‰ªªÂãôÔºöÂπ´Â∞èÂ≠©Ë≤∑Èõ™Èù¥ ‚ùÑÔ∏è
‚Ä¢ Âá∫ÁôºÂâçÈáè‰∏Ä‰∏ãÂºüÂºüËÖ≥Â∞∫ÂØ∏
‚Ä¢ Á¢∫Ë™çÂì•Âì•ÁöÑÈõ™Èù¥ÊòØÂê¶ÈÇÑÁ©øÂæó‰∏ã`,
             imagePlaceholder: 'https://picsum.photos/id/1070/800/600',
        },
        {
            id: 'senbei',
            title: 'Êñ∞ÊΩü‰ªôË≤ùÁéãÂúã',
            subtitle: 'Êâã‰Ωú‰ªôË≤ùÈ´îÈ©ó',
            description: `„ÄêÈ´îÈ©óË≥áË®ä„Äë
‚Ä¢ Âèó‰ªòÊúüÈñìÔºö9ÊôÇ30ÂàÜÔΩû16ÊôÇ30ÂàÜ
‚Ä¢ ÊâÄË¶ÅÊôÇÈñìÔºöÈ´îÈ©óËèúÂñÆÂõ†ÂÖßÂÆπ‰∏çÂêåÔºåÊúÄÈï∑Á¥Ñ30ÂàÜÈêò
ÔºàÁÖéÈ§ÖÁÉòÁÉ§È´îÈ©ó„ÉªÁÖéÈ§ÖË™øÂë≥È´îÈ©óÂÖ±‰∫îÁ®ÆÔºâ

„ÄêË≤ªÁî®„Äë
‚óè ÂÖ•Â†¥ÊñôÔºöÁÑ°Êñô
‚óè Ë∂ÖÁâπÂ§ßÁÖéÈ§ÖÔºö1Áâá 1,800Êó•Âúì
‚óè „Å∞„Åã„ÅÜ„ÅëÂë≥ÈÅìÈ´îÈ©óÔºö15Áâá1ÁµÑ 1,500Êó•Âúì`,
            imagePlaceholder: 'https://picsum.photos/id/1060/800/600',
            details: [
                { label: 'MapCode', value: '524 050 121*18' },
                { label: 'ÁáüÊ•≠ÊôÇÈñì', value: '09:30 - 16:30' }
            ]
        },
        {
            id: 'railway',
            title: 'Êñ∞Ê¥•ÈêµÈÅìË≥áÊñôÈ§®',
            subtitle: 'ÈêµÈÅìËø∑ÂøÖË®™',
            description: `„ÄêÁ•®ÂÉπ„Äë
‚Ä¢ ‰∏ÄËà¨Ôºö390Êó•Âúì
‚Ä¢ È´ò‰∏≠Áîü„ÉªÂ§ßÂ≠∏ÁîüÔºö260Êó•Âúì
‚Ä¢ Â∞èÂ≠∏Áîü„Éª‰∏≠Â≠∏ÁîüÔºö130Êó•Âúì

„ÄêÈ´îÈ©óË®≠ÊñΩ„Äë
‚Ä¢ Ëø∑‰Ω† SL Êê≠‰πòÈ´îÈ©óÔºöÊØè‰∫∫ÊØèÊ¨° 130Êó•Âúì
‚Ä¢ ÈõªËªäÈßïÈßõÊ®°Êì¨Âô®ÔºöÊØè‰∫∫ÊØèÊ¨° 100Êó•Âúì`,
            imagePlaceholder: 'https://picsum.photos/id/1058/800/600',
            details: [
                { label: 'MapCode', value: '32 467 762*26' },
                { label: 'ÈñÄÁ•®', value: '390 JPY' }
            ]
        },
        {
            id: 'befco',
            title: 'Befco „Å∞„Åã„ÅÜ„ÅëÂ±ïÊúõÂÆ§',
            subtitle: 'Êú±È∑∫Â±ïË¶ΩÈ§® 31F',
            description: `„ÄêÂèÉËßÄË≥áË®ä„Äë
‚Ä¢ ÈñãÈ§®ÊôÇÈñìÔºö8:00-22:00
 (ÊúÄÁµÇÂÖ•Â†¥ 21:30 / Âë®‰∫î~17:00)

„ÄêË≤ªÁî®„Äë
‚Ä¢ Â§ß‰∫∫Ôºö300Êó•Âúì
‚Ä¢ Â§ßÂ≠∏ÂèäÈ´ò‰∏≠ÁîüÔºö200Êó•Âúì
‚Ä¢ ‰∏≠Â≠∏Áîü‰ª•‰∏ãÔºöÂÖçË≤ª
 (ÂÖ∂‰ªñÁâπÊÆäÂ±ïË¶ΩÈñÄÁ•®Âè¶Ë®à)`,
            imagePlaceholder: 'https://picsum.photos/id/1042/800/600',
            details: [
                { label: 'MapCode', value: 'Google Maps' },
                { label: 'ÈñÄÁ•®', value: '300 JPY' }
            ]
        },
        {
            id: 'comfort_hotel',
            title: 'Comfort Hotel Ááï‰∏âÊù°',
            subtitle: '‰∏âÊ¢ùÂá±ÂØåÈÖíÂ∫ó',
            description: `„ÄêÂÅúËªäË≥áË®ä„Äë
‚ñ† Â†¥ÂÖßÂÅúËªäÂ†¥ (Âπ≥Èù¢)
‚Ä¢ È´òÂ∫¶ÈôêÂà∂ÔºöÁÑ°
‚Ä¢ Âè∞Êï∏Ôºö87Âè∞
‚Ä¢ Ë≤ªÁî®Ôºö15:00ÔΩûÁøå10:00 ÂÖçË≤ª
(‰æù‰ΩèÂÆøÊñπÊ°àÁöÑÂÅúÁïôÊôÇÈñìÁÇ∫Ê∫ñÔºåÂÖ∂‰ªñÊôÇÈñìÁ¶ÅÊ≠¢ÂÅúËªä)`,
            imagePlaceholder: 'https://picsum.photos/id/1000/800/600',
            details: [
                { label: 'MapCode', value: '58 833 183*73' },
                { label: 'ÂÅúËªä', value: 'ÂÖçË≤ª (‰ΩèÂÆ¢)' }
            ]
        },
        {
            id: 'furusato',
            title: 'Êñ∞ÊΩüÊïÖÈÑâÊùë',
            subtitle: 'Êñ∞ÊΩü„Åµ„Çã„Åï„Å®Êùë',
            description: `„ÄêÂèÉËßÄË≥áË®ä„Äë
‚Ä¢ ÁáüÊ•≠ÊôÇÈñìÔºö9:30ÔΩû17:30
 (ÈÄ£Á∫åÂÅáÊúüÊúâÊôÇÊúÉÂª∂Èï∑„ÄÇÂêÑÈ£≤È£üÂ∫óÂèØËá™Ë°åÊ±∫ÂÆöÁáüÊ•≠ÊôÇÈñì„ÄÇ)
‚Ä¢ ÂÖ•Â†¥Ë≤ªÔºöÂÖçÂÖ•Â†¥Ë≤ª
‚Ä¢ ÂÆòÁ∂≤Ôºöhttp://furusatomura.pref.niigata.jp/cnt/
‚Ä¢ Âª∂‰º∏Èñ±ËÆÄÔºöhttps://vocus.cc/article/64aa8cf5fd897800017c807f

ÈÄôË£°ÈõÜÂêà‰∫ÜÊñ∞ÊΩüÁöÑÁæéÈ£üËàáÊ≠∑Âè≤ÔºåÂÆ§ÂÖßÊúâÂ§ßÂûãÈÅäÊ®ÇË®≠ÊñΩÔºåÈÅ©ÂêàË¶™Â≠êÂêåÊ®Ç„ÄÇ`,
            imagePlaceholder: 'https://picsum.photos/id/1084/800/600',
            details: [
                { label: 'MapCode', value: '32 692 564*67' },
                { label: 'ÈõªË©±', value: '025-230-3030' }
            ]
        },
        {
            id: 'yahiko',
            title: 'ÂΩåÂΩ•Á•ûÁ§æ & Á∫úËªä',
            subtitle: 'Ë∂äÂæåÁ¨¨‰∏ÄÂÆÆ',
            description: `„ÄêÂΩåÂΩ•Á•ûÁ§æ„Äë
ÊìÅÊúâ2400Âπ¥Ê≠∑Âè≤ÔºåÂÖÖÊªøÈùàÊ∞£ÁöÑËÉΩÈáèÊôØÈªû„ÄÇ

„ÄêÂΩåÂΩ•Â±±Á∫úËªä„Äë
‚Ä¢ ‰∫§ÈÄöÔºöÂæûÂèÉÊãúÊÆøÂÅ¥Ëá≥Â±±È∫ìÁ´ôÔºåÊê≠‰πòÂÖçË≤ªÊé•ÈßÅÂ∑¥Â£´Á¥Ñ3ÂàÜÈêò„ÄÇ
‚Ä¢ Ë≤ªÁî®ÔºöÊàê‰∫∫800Êó•ÂúìÔºèÂÖíÁ´•400Êó•Âúì (3Ê≠≤‰ª•‰∏ãÂÖçË≤ª)
‚Ä¢ ÁáüÊ•≠ÊôÇÈñìÔºö‰æùÊôÇÊúüËÄåÁï∞
‚Ä¢ ÂÖ¨‰ºëÊó•Ôºö‰∏çÂÆöÊúü
‚Ä¢ Âª∂‰º∏Èñ±ËÆÄÔºöhttps://vocus.cc/article/64aa8cf5fd897800017c807f`,
            imagePlaceholder: 'https://picsum.photos/id/1036/800/600',
            details: [
                { label: 'MapCode', value: '190 129 317*13' },
                { label: 'ÈõªË©±', value: '0256-94-4141' }
            ]
        },
        {
            id: 'tsubame_center',
            title: 'Ááï‰∏âÊ¢ùÂú∞Â†¥Áî¢Ê•≠ÊåØËàà‰∏≠ÂøÉ',
            subtitle: 'ÈáëÂ±¨Â∑•ËóùËÅñÂú∞',
            description: `Ááï‰∏âÊ¢ù‰ª•ÈáëÂ±¨Âä†Â∑•ËàáÊ¥ãÈ£üÂô®ËÅûÂêç„ÄÇÈÄôË£°ÂåØÈõÜ‰∫ÜÁï∂Âú∞ÊúÄÈ´òÂìÅË≥™ÁöÑÈ§êÂÖ∑„ÄÅÈçãÂÖ∑ËàáÂ∑•ËóùÂìÅÔºåÊòØÈÅ∏Ë≥º‰º¥ÊâãÁ¶ÆÁöÑÊúÄ‰Ω≥Âú∞Èªû„ÄÇ

‚Ä¢ ÂÆòÁ∂≤Ôºöhttps://www.tsjiba.or.jp/ch/
‚Ä¢ Âª∂‰º∏Èñ±ËÆÄÔºöhttps://vocus.cc/article/64aa8cf5fd897800017c807f`,
            imagePlaceholder: 'https://picsum.photos/id/1013/800/600',
            details: [
                { label: 'MapCode', value: '58 832 492*03' },
                { label: 'ÈõªË©±', value: '0256-32-2311' }
            ]
        },
        {
            id: 'hangzhou',
            title: 'Êù≠Â∑ûÈ£ØÂ∫ó',
            subtitle: 'ÂÖÉÁ•ñËÉåËÑÇÊãâÈ∫µ',
            description: `„ÄêÈ§êÂª≥Ë≥áË®ä„Äë
‚Ä¢ Ë©ïÂàÜÔºö3.9 (2,699ÂâáË©ïË´ñ)
‚Ä¢ È†êÁÆóÔºö¬•1,000 - ¬•2,000
‚Ä¢ È°ûÂà•ÔºöÊãâÈ∫µ„ÄÅÈ§ÉÂ≠ê„ÄÅ‰∏≠ÂúãËèú
‚Ä¢ ÁâπËâ≤ÔºöÁáï‰∏âÊ¢ùÁü•ÂêçÁöÑ„ÄåËÉåËÑÇÊãâÈ∫µ„ÄçÁôºÊ∫êÂú∞„ÄÇÊ•µÁ≤óÈ∫µÊ¢ùÊê≠ÈÖçÊøÉÈÉÅÈÜ¨Ê≤πÊπØÈ†≠ËàáÊªøÊªøËÉåËÑÇÔºåÂè£Âë≥Áç®Áâπ„ÄÇ`,
            imagePlaceholder: 'https://picsum.photos/id/1062/800/600',
            details: [
                { label: 'MapCode', value: '190 019 628*63' },
                { label: 'Êé®Ëñ¶', value: 'ËÉåËÑÇÊãâÈ∫µ' }
            ]
        },
        {
            id: 'angel_shuttle',
            title: 'È£ØÂ∫óÊé•ÈßÅÂ∑¥Â£´',
            subtitle: 'Ë∂äÂæåÊπØÊæ§Á´ôË•øÂè£ ‚áÑ Â§©‰ΩøÊ†ºÊòÇËø™‰∫û',
            description: `„ÄêÊôÇÂàªË°®„Äë(Ê°àÂÖßÊâÄÁôº ‚Üí È£ØÂ∫óÁôº)

08:30 ‚Üí 08:30
09:00 ‚Üí 09:00
09:30 ‚Üí ‚òÖ09:45
10:00 ‚Üí ‚òÖ10:15
10:30 ‚Üí ‚òÖ10:45
11:00 ‚Üí ‚òÖ11:15
11:30 ‚Üí ‚òÖ11:45
12:00 ‚Üí ‚òÖ12:15
----  ‚Üí ‚òÖ12:45
13:00 ‚Üí ‚òÖ13:15
13:30 ‚Üí ‚òÖ13:45
14:00 ‚Üí 14:00
14:30 ‚Üí 14:30
15:00 ‚Üí 15:00
15:30 ‚Üí ‚òÖ15:45
16:00 ‚Üí ‚òÖ16:15
16:30 ‚Üí ‚òÖ16:45
17:00 ‚Üí ‚òÖ17:15
----  ‚Üí ‚òÖ17:45
18:00 ‚Üí 18:00
18:30 ‚Üí ---
19:30 ‚Üí 19:00
20:30 ‚Üí 20:00
‚Äª21:30 ‚Üí ‚Äª21:00

üìå ÂÇôË®ª
‚ÄªÂç∞ÔºöÂÉÖÈÄ±‰∫î„ÄÅÈÄ±ÂÖ≠ÈÅãË°åÔºàÁâπÂÆöÊó•Êúü‰∫¶Ë¶ñÁÇ∫ÈÄ±‰∫î„ÄÅÈÄ±ÂÖ≠Ôºâ„ÄÇ
‚òÖÂç∞ÔºöÂÉÖÂú®ÊåáÂÆöÊó•ÊúüÔºàÂ¶Ç 12/26ÔΩû1/4„ÄÅ1/9ÔΩû11„ÄÅ1/16ÔΩû18„ÄÅ1/23ÔΩû3/8ÔºâÈÅãË°å„ÄÇ`,
            imagePlaceholder: 'https://picsum.photos/id/1071/800/600',
            details: [
                { label: '‰πòËªäËôï', value: 'Ë∂äÂæåÊπØÊæ§Á´ôË•øÂè£' },
                { label: 'Ë≤ªÁî®', value: 'ÂÖçË≤ª (ÊàøÂÆ¢)' }
            ]
        },
        {
            id: 'kiyotsu',
            title: 'Ê∏ÖÊ¥•Â≥Ω',
            subtitle: 'ÂÖâ‰πãÈößÈÅì (Tunnel of Light)',
            description: 'Êó•Êú¨‰∏âÂ§ßÂ≥ΩË∞∑‰πã‰∏Ä„ÄÇ„ÄåÂÖâ‰πãÈößÈÅì„ÄçÊòØËëóÂêçÁöÑËóùË°ìË£ùÁΩÆÔºåÈößÈÅìÁõ°È†≠ÁöÑÊ∞¥Áõ§ÂÄíÊò†ËëóÂ≥ΩË∞∑ÁöÑÂ£ØÈ∫óÊôØËâ≤ÔºåÂΩ¢ÊàêÂ§¢ÂπªËà¨ÁöÑÂÄíÂΩ±ÔºåÊòØÁµïÂ∞ç‰∏çËÉΩÈåØÈÅéÁöÑÊâìÂç°ËÅñÂú∞„ÄÇ',
            imagePlaceholder: 'https://picsum.photos/id/1015/800/600',
            details: [
                { label: 'MapCode', value: '‰ΩøÁî® Google Maps' },
                { label: 'ÈñÄÁ•®', value: 'Êàê‰∫∫ 1000Êó•Âúì' }
            ]
        },
        {
            id: 'strawberry',
            title: 'ÊπØÊæ§ËçâËéìÊùë',
            subtitle: 'Èõ™ÂõΩ„Ç¢„Ç∞„É™„Éë„Éº„ÇØÊπØÊ≤¢„ÅÑ„Å°„ÅîÊùë',
            description: `„ÄêÁáüÊ•≠Ë≥áË®ä„Äë
‚Ä¢ Âú∞ÂùÄÔºöÊñ∞ÊΩüÁúåÂçóÈ≠öÊ≤ºÈÉ°ÊπØÊ≤¢Áî∫Á•ûÁ´ã750-1
‚Ä¢ ÊôÇÈñìÔºö10:00‚Äì15:30 (15:30ÊúÄÂæåÂÖ•Â†¥)
‚Ä¢ ÂÇôË®ªÔºöÂá∫ÁôºÂâçË´ã‰∫ãÂÖàÁ¢∫Ë™çÊòØÂê¶ÁáüÊ•≠

‰ΩçÊñºÈõ™ÂúãÁöÑÊ∫´ÂÆ§ËçâËéìÂúíÔºå‰∫´ÂèóÁèæÊé°Êñ∞ÈÆÆËçâËéìÁöÑÊ®ÇË∂£„ÄÇ`,
            imagePlaceholder: 'https://picsum.photos/id/1080/800/600',
            details: [
                { label: 'MapCode', value: 'Google Maps' },
                { label: 'Ê¥ªÂãï', value: 'Êé°ËçâËéì' }
            ]
        }
      ];

      const ITINERARY = [
        {
            date: '1/9',
            dayOfWeek: 'ÈÄ±‰∫î',
            title: 'ÊäµÈÅîÊñ∞ÊΩü',
            items: [
                { time: '13:55', title: 'TPE Ê°ÉÂúíÊ©üÂ†¥Âá∫Áôº (IT228)', type: 'transport', description: 'Âè∞ÁÅ£ËôéËà™ Á¨¨‰∏ÄËà™Âªà', highlight: true },
                { time: '18:00', title: 'ÊäµÈÅîÊñ∞ÊΩüÊ©üÂ†¥ (KIJ)', type: 'transport', description: 'Ëæ¶ÁêÜÂÖ•Â¢ÉÊâãÁ∫å„ÄÇÂâçÂæÄÊé•ÈßÅÂ∑¥Â£´Á´ô„ÄÇ', highlight: true, guideId: 'airport' },
                { time: '19:00', title: 'ÂâçÂæÄÊñ∞ÊΩüÁ´ô', type: 'transport', description: 'Ê©üÂ†¥Êé•ÈßÅÂ∑¥Â£´ (ÊôÇÂàªË°®Ë©≥Ë¶ãË™™Êòé)„ÄÇËªäË≥áÔºöÊàê‰∫∫470Êó•Âúì„ÄÇ' },
                { time: 'Check-in', title: 'Êñ∞ÊΩüÁ¨¨‰∏ÄÈ£ØÂ∫ó', type: 'hotel', description: 'Èõ¢ËªäÁ´ôÂæíÊ≠•1ÂàÜÈêò„ÄÇB1FÊúâÂ§ßÊµ¥Â†¥„ÄÇ1FÈÄ£ÈÄöLawson„ÄÇ', locationLink: 'https://maps.app.goo.gl/NiigataDaiichi', guideId: 'niigata_daiichi' },
                { time: 'ÊôöÈ§ê', title: 'ÂªªËΩâÂ£ΩÂè∏ ÂºÅÊÖ∂ Êàñ Royal Host', type: 'food', description: '‰ΩçÊñºPia BandaiÊàñËªäÁ´ôÂçóÂè£„ÄÇ' },
                { time: 'Ë≥ºÁâ©', title: 'XEBIO ÈÅãÂãïÂø´Á∑ö', type: 'activity', description: 'Êñ∞ÊΩüËªäÁ´ôÂ∫ó„ÄÇÊé°Ë≤∑Èõ™Èù¥„ÄÇ', guideId: 'xebio' }
            ]
        },
        {
            date: '1/10',
            dayOfWeek: 'ÈÄ±ÂÖ≠',
            title: 'ÊñáÂåñËàáÊ≠∑Âè≤',
            items: [
                { time: '09:00', title: 'ÂèñËªäÔºöË±êÁî∞ÁßüËªä', type: 'transport', description: 'Êñ∞ÊΩüËªäÁ´ôÂçóÂè£Â∫ó„ÄÇÈ†êÁ¥ÑÂñÆËôüÔºö98129667400„ÄÇ', locationLink: 'https://maps.app.goo.gl/ToyotaRentNiigata', highlight: true },
                { time: '‰∏äÂçà', title: 'Êñ∞ÊΩü‰ªôË≤ùÁéãÂúã', type: 'activity', description: 'È´îÈ©óË£Ω‰ΩúÁâπÂ§ß‰ªôË≤ù„ÄÇ', locationLink: 'https://maps.app.goo.gl/SenbeiKingdom', mapCode: '524 050 121*18', guideId: 'senbei' },
                { time: '‰∏ãÂçà', title: 'Êñ∞Ê¥•ÈêµÈÅìË≥áÊñôÈ§®', type: 'activity', description: 'Êñ∞ÂππÁ∑öÂØ¶È´îËªäÂªÇÂ±ïÁ§∫„ÄÇ', locationLink: 'https://maps.app.goo.gl/NiitsuRailway', mapCode: '32 467 762*26', guideId: 'railway' },
                { time: '16:43', title: 'Befco „Å∞„Åã„ÅÜ„ÅëÂ±ïÊúõÂÆ§', type: 'activity', description: 'Ê¨£Ë≥ûÂ§ïÈôΩËàáÂ§úÊôØ„ÄÇÊúÄÂæåÂÖ•Â†¥21:30„ÄÇ', locationLink: 'https://maps.app.goo.gl/BefcoObservatory', guideId: 'befco' },
                { time: 'Check-in', title: 'Ááï‰∏âÊ¢ùÂá±ÂØåÈ£ØÂ∫ó', type: 'hotel', description: 'Comfort Hotel„ÄÇÂπ≥Èù¢ÂÅúËªäÂ†¥ÂÖçË≤ª„ÄÇ', locationLink: 'https://maps.app.goo.gl/ComfortTsubame', mapCode: '58 833 183*73', guideId: 'comfort_hotel' }
            ]
        },
        {
            date: '1/11',
            dayOfWeek: 'ÈÄ±Êó•',
            title: 'ÂΩåÂΩ•Á•ûÁ§æËàáÁáï‰∏âÊ¢ù',
            items: [
                { time: '09:30', title: 'Êñ∞ÊΩüÊïÖÈÑâÊùë', type: 'activity', description: 'Â§ßÂûãË§áÂêàË®≠ÊñΩ„ÄÇÂÖçÂÖ•Â†¥Ë≤ª„ÄÇ', locationLink: 'https://maps.app.goo.gl/FurusatoVillage', mapCode: '32 692 564*67', guideId: 'furusato' },
                { time: '12:00', title: 'ÂΩåÂΩ•Á•ûÁ§æ & Á∫úËªä', type: 'activity', description: 'Ë∂äÂæåÁ¨¨‰∏ÄÂÆÆ„ÄÇÊê≠‰πòÂÖçË≤ªÊé•ÈßÅËªäËá≥Á∫úËªäÁ´ô„ÄÇ', locationLink: 'https://maps.app.goo.gl/YahikoShrine', mapCode: '190 129 317*13', guideId: 'yahiko' },
                { time: '‰∏ãÂçà', title: 'Ááï‰∏âÊ¢ùÂú∞Â†¥Áî¢ÊåØËàà‰∏≠ÂøÉ', type: 'activity', description: 'ÂåØÈõÜÁï∂Âú∞ÈáëÂ±¨Â∑•ËóùÂìÅËàáÈ§êÂÖ∑„ÄÇ', locationLink: 'https://maps.app.goo.gl/TsubameCenter', mapCode: '58 832 492*03', guideId: 'tsubame_center' },
                { time: 'Ë≥ºÁâ©', title: 'High Grade Store', type: 'activity', description: 'Ê†™Âºè‰ºöÁ§æ„Ç´„É≥„ÉÄ„ÄÇÈ§êÂÖ∑Outlet„ÄÇ', mapCode: '58 828 829*78' },
                { time: 'ÊôöÈ§ê', title: 'Êù≠Â∑ûÈ£ØÂ∫ó', type: 'food', description: 'ÂÖÉÁ•ñËÉåËÑÇÊãâÈ∫µ„ÄÇ', locationLink: 'https://maps.app.goo.gl/HangzhouHanten', mapCode: '190 019 628*63', guideId: 'hangzhou' },
                { time: 'Ë∂ÖÂ∏Ç', title: 'AEON Mall Êñ∞ÊΩüÈæúÁî∞', type: 'food', description: 'Êé°Ë≤∑Ë£úÁµ¶„ÄÇ', mapCode: '58 832 707*36' },
                { time: 'Ë∂ÖÂ∏Ç', title: 'AEON Style Ááï‰∏âÊ¢ùÈ†àÈ†É', type: 'food', description: '2025/11Êñ∞ÈñãÂπï„ÄÇ' },
                { time: 'Ë∂ÖÂ∏Ç', title: 'Challenger Ááï‰∏âÊ¢ùÂ∫ó', type: 'food', description: 'Áï∂Âú∞Ë∂ÖÂ∏Ç„ÄÇ', mapCode: '58 863 291*74' },
                { time: '‰∫åÊâã', title: '2nd Street', type: 'activity', description: 'SanjoÂ∫ó (3.2km) / TsubamesanjoÂ∫ó (3.3km)„ÄÇ', mapCode: '58 832 819*87' }
            ]
        },
        {
            date: '1/12',
            dayOfWeek: 'ÈÄ±‰∏Ä',
            title: 'ËóùË°ìËàáÊªëÈõ™',
            items: [
                { time: '‰∏äÂçà', title: 'Ê∏ÖÊ¥•Â≥Ω', type: 'activity', description: 'ÂÖâ‰πãÈößÈÅì (Tunnel of Light)„ÄÇÊó•Êú¨‰∏âÂ§ßÂ≥ΩË∞∑‰πã‰∏Ä„ÄÇ', locationLink: 'https://maps.app.goo.gl/KiyotsuGorge', guideId: 'kiyotsu' },
                { time: '12:00', title: 'È†òÂèñÊªëÈõ™Ë£ùÂÇô', type: 'activity', description: 'ÈùíÈÅîÈõ™ÂÖ∑„ÄÇÂ∑≤È†êÁ¥Ñ12:00-14:00ÊôÇÊÆµ (‰∏ÄÂ§ß‰∏ÄÂ∞è)„ÄÇ', highlight: true },
                { time: '15:00', title: 'Ë∂äÂæåÊπØÊæ§Á´ô', type: 'transport', description: 'Êé•ÈßÅÂ∑¥Â£´ÊôÇÂàªË°® (ÈªûÊìäÊü•ÁúãË©≥Á¥∞Ë°®Ê†º)„ÄÇ', guideId: 'angel_shuttle' },
                { time: 'Check-in', title: 'Â§©‰ΩøÊ†ºÊòÇËø™‰∫ûÈ£ØÂ∫ó', type: 'hotel', description: 'Hotel Angel Grandia Echigo Nakazato„ÄÇË¶™Â≠êÊªëÈõ™Â∫¶ÂÅáÊùë„ÄÇÂê´BuffetÊôöÈ§ê„ÄÇ', locationLink: 'https://maps.app.goo.gl/AngelGrandia' }
            ]
        },
        {
            date: '1/13',
            dayOfWeek: 'ÈÄ±‰∫å',
            title: 'ÊªëÈõ™Êó• Day 1',
            items: [
                { time: '09:00', title: 'Â™ΩÂ™ΩÊªëÈõ™Ë™≤', type: 'activity', description: '09:00 - 15:00„ÄÇÊïôÁ∑¥È†êÁ¥ÑÁ¢∫Ë™ç„ÄÇ' },
                { time: 'ÂÖ®Â§©', title: 'Áé©Èõ™ / Ëá™‰∏ªÊªëÈõ™', type: 'activity', description: 'ÂÖíÁ´•Èõ™Âú∞Ê®ÇÂúíÊàñÂàùÂ≠∏ËÄÖÊªëÈÅì„ÄÇ' },
                { time: 'Êôö‰∏ä', title: 'È£ØÂ∫ó Buffet & Ê∫´Ê≥â', type: 'food', description: 'ÊªëÈõ™ÂæåÁöÑÊîæÈ¨ÜÊôÇÂÖâ„ÄÇ' }
            ]
        },
        {
            date: '1/14',
            dayOfWeek: 'ÈÄ±‰∏â',
            title: 'ÊªëÈõ™Êó• Day 2',
            items: [
                { time: '09:00', title: 'Â™ΩÂ™ΩÊªëÈõ™Ë™≤', type: 'activity', description: '09:00 - 15:00„ÄÇ' },
                { time: '‰∏ãÂçà', title: 'Ê®ÇÂì•Âä†ÂÖ•', type: 'info', description: 'Ê®ÇÂì•È†êË®à‰ªäÂ§©Âä†ÂÖ•ÊªëÈõ™Ë°åÁ®ã„ÄÇ' },
                { time: 'Êôö‰∏ä', title: 'È£ØÂ∫ó Buffet', type: 'food', description: '' }
            ]
        },
        {
            date: '1/15',
            dayOfWeek: 'ÈÄ±Âõõ',
            title: 'ÊªëÈõ™ËàáÊñ∞ÂππÁ∑ö',
            items: [
                { time: '09:00', title: 'Ëá™Áî±ÊªëÈõ™ÊôÇÈñì', type: 'activity', description: 'ÊääÊè°ÊúÄÂæåÊªëÈõ™ÊôÇÂÖâ (Êó©‰∏äÂà∞‰∏ãÂçà)„ÄÇ' },
                { time: '15:57', title: '‰∏äË∂äÊñ∞ÂππÁ∑ö (Toki 329)', type: 'transport', description: 'Ë∂äÂæåÊπØÊæ§Á´ôÂá∫Áôº -> 16:42 ÊäµÈÅîÊñ∞ÊΩüÁ´ô„ÄÇÁ•®ÂÉπ ¬•5,280/‰∫∫„ÄÇ (45ÂàÜÈêò)', highlight: true },
                { time: 'Check-in', title: 'Êñ∞ÊΩüÁ¨¨‰∏ÄÈ£ØÂ∫ó', type: 'hotel', description: 'Êñ∞ÊΩüÂ∏ÇÂçÄÂïÜÂãôÈ£ØÂ∫ó (3540/Êôö)„ÄÇ‰∏çÂê´Êó©È§ê„ÄÇ', guideId: 'niigata_daiichi' },
                { time: 'Êôö‰∏ä', title: 'Êñ∞ÊΩüÁ´ôÂâç', type: 'food', description: 'ËªäÁ´ôÂë®ÈÇäÊôöÈ§ê„ÄÇ' }
            ]
        },
        {
            date: '1/16',
            dayOfWeek: 'ÈÄ±‰∫î',
            title: 'Ë≥ºÁâ©ËàáÂõûÁ®ã',
            items: [
                { time: '‰∏äÂçà', title: 'Â∏ÇÂçÄË≥ºÁâ©Êé°Ë≤∑', type: 'activity', description: 'Êñ∞ÊΩüÂ∏ÇÂçÄÂêÑÂ§ß Shopping Mall Êé°Ë≥º (Aeon / Bandai City Á≠â)„ÄÇ' },
                { time: '17:00', title: 'ÂâçÂæÄÊñ∞ÊΩüÊ©üÂ†¥', type: 'transport', description: 'ÂæûÊñ∞ÊΩüÁ´ôÂâçÂæÄÊ©üÂ†¥ (Â∑¥Â£´/Ë®àÁ®ãËªä)„ÄÇ' },
                { time: '19:00', title: 'Êñ∞ÊΩüÊ©üÂ†¥Âá∫Áôº (IT229)', type: 'transport', description: 'KIJ 19:00 ‚úàÔ∏è TPE 22:30„ÄÇ', highlight: true },
                { time: '22:30', title: 'ÊäµÈÅîÂè∞ÁÅ£', type: 'info', description: 'Âπ≥ÂÆâËøîÂÆ∂„ÄÇ' }
            ]
        }
      ];

      const PRE_TRIP_CHECKLIST = [
        { id: '1', text: 'Ë≠∑ÁÖß (ÊúâÊïàÊúü6ÂÄãÊúà‰ª•‰∏ä)', completed: false },
        { id: '2', text: '‰ø°Áî®Âç° & ÁèæÈáë (Êó•Âπ£/Âè∞Âπ£)', completed: false },
        { id: '3', text: 'Êó•ÊñáË≠ØÊú¨ÈßïÁÖß', completed: false },
        { id: '4', text: 'Âè∞ÁÅ£ÈßïÁÖßÊ≠£Êú¨', completed: false },
        { id: '5', text: 'È£ØÂ∫óË®ÇÊàøÊÜëË≠â (PDF/ÂàóÂç∞)', completed: false },
        { id: '6', text: 'SIMÂç° / Êº´ÈÅäË®≠ÂÆö', completed: false },
        { id: '7', text: 'Ë°åÂãïÈõªÊ∫ê & ÂÖÖÈõªÁ∑ö', completed: false },
        { id: '8', text: 'ÊªëÈõ™Ë£ùÂÇôÂ∞∫ÂØ∏Á¢∫Ë™ç', completed: false },
        { id: '9', text: 'ÂÄã‰∫∫Ëó•ÂìÅ / ÈÖíÁ≤æ / Âè£ÁΩ©', completed: false },
        { id: '10', text: 'Ë°åÊùéÁß§', completed: false },
        { id: '11', text: 'ÂéüÂ≠êÁ≠Ü (Â°´ÂÖ•Â¢ÉÂç°Áî®)', completed: false },
        { id: '12', text: 'Ë°õÁîüÁ¥ô / ÊøïÁ¥ôÂ∑æ', completed: false },
        { id: '13', text: 'È£ØÂ∫óÈ†êÁ¥ÑÁ¢∫Ë™ç‰ø° (Â§©‰ΩøÊ†ºÊòÇËø™‰∫û)', completed: false },
      ];

      // --- COMPONENTS ---

      // Weather Component
      const WeatherWidget = () => {
        const [forecast, setForecast] = useState([]);
        const [loading, setLoading] = useState(true);
        const [isOpen, setIsOpen] = useState(false);

        // Helper to get day name
        const getDayName = (dateStr) => {
            const date = new Date(dateStr);
            const today = new Date();
            today.setHours(0,0,0,0);
            const d = new Date(date);
            d.setHours(0,0,0,0);
            
            if (d.getTime() === today.getTime()) return '‰ªäÊó•';
            const days = ['ÈÄ±Êó•', 'ÈÄ±‰∏Ä', 'ÈÄ±‰∫å', 'ÈÄ±‰∏â', 'ÈÄ±Âõõ', 'ÈÄ±‰∫î', 'ÈÄ±ÂÖ≠'];
            return `${date.getMonth() + 1}/${date.getDate()} (${days[date.getDay()]})`;
        };

        // Helper for icons and mapping codes to text
        const getWeatherInfo = (codeStr) => {
            const code = parseInt(codeStr);
            if (code >= 100 && code < 200) return { icon: "fa-sun text-yellow-500", label: "Êô¥Êúó" };
            if (code >= 200 && code < 300) {
                if (code >= 200 && code <= 210) return { icon: "fa-cloud text-gray-400", label: "Â§öÈõ≤" };
                if (code >= 211 && code <= 299) return { icon: "fa-cloud-rain text-gray-300", label: "Èô∞ÊúâÈõ®" };
                return { icon: "fa-cloud text-gray-400", label: "Â§öÈõ≤" };
            } 
            if (code >= 300 && code < 400) return { icon: "fa-umbrella text-blue-400", label: "Èõ®Â§©" };
            if (code >= 400) return { icon: "fa-snowflake text-white animate-pulse", label: "‰∏ãÈõ™" };
            return { icon: "fa-cloud-sun text-gray-400", label: "Â§öÈõ≤ÊôÇÊô¥" };
        };

        useEffect(() => {
            // Fetch Niigata (150000) forecast from JMA
            fetch('https://www.jma.go.jp/bosai/forecast/data/forecast/150000.json')
            .then(res => res.json())
            .then(data => {
                if (data && data[0] && data[1]) {
                    const result = [];
                    
                    // --- Process Weekly Data (data[1]) as the backbone ---
                    const weeklySeries = data[1].timeSeries;
                    const weeklyDates = weeklySeries[0].timeDefines;
                    const weeklyCodes = weeklySeries[0].areas[0].weatherCodes;
                    const weeklyMin = weeklySeries[1].areas[0].tempsMin;
                    const weeklyMax = weeklySeries[1].areas[0].tempsMax;

                    // --- Process Daily Data (data[0]) for more detail on first 2 days ---
                    const dailySeries = data[0].timeSeries;
                    const dailyDates = dailySeries[0].timeDefines;
                    const dailyWeathers = dailySeries[0].areas[0].weathers;
                    const dailyPops = dailySeries[1].areas[0].pops; 
                    
                    // Map Daily Pops to Dates
                    const popMap = {};
                    const popTimeDefines = dailySeries[1].timeDefines;
                    
                    popTimeDefines.forEach((t, i) => {
                        const dayKey = t.substring(0, 10);
                        const val = parseInt(dailyPops[i]);
                        if (!popMap[dayKey] || val > parseInt(popMap[dayKey])) {
                            popMap[dayKey] = dailyPops[i] + '%';
                        }
                    });

                    // Combine into final array
                    weeklyDates.forEach((dateStr, i) => {
                        const dayKey = dateStr.substring(0, 10);
                        
                        // Defaults from Weekly
                        let code = weeklyCodes[i];
                        let minT = weeklyMin[i] === '' ? '-' : weeklyMin[i] + '¬∞';
                        let maxT = weeklyMax[i] === '' ? '-' : weeklyMax[i] + '¬∞';
                        let text = '';
                        let pop = '-';

                        // Overlay Daily Data if available
                        const dailyIndex = dailyDates.findIndex((d) => d.startsWith(dayKey));
                        if (dailyIndex !== -1) {
                            text = dailyWeathers[dailyIndex]; 
                        }

                        if (popMap[dayKey]) {
                            pop = popMap[dayKey];
                        }

                        // If no text description, generate from code
                        if (!text) {
                            text = getWeatherInfo(code.toString()).label;
                        }

                        result.push({
                            date: dateStr,
                            code: code.toString(),
                            text,
                            pop,
                            minTemp: minT,
                            maxTemp: maxT
                        });
                    });

                    setForecast(result);
                }
                setLoading(false);
            })
            .catch(err => {
                console.error("Weather fetch failed", err);
                setLoading(false);
            });
        }, []);

        return (
            <React.Fragment>
            {/* Trigger Button */}
            <button 
                onClick={() => setIsOpen(true)}
                className="w-full bg-gradient-to-r from-luxury-charcoal to-luxury-black border border-gold-500/30 rounded-xl p-4 flex justify-between items-center shadow-lg active:scale-[0.98] transition-all group"
            >
                <div className="flex items-center gap-4">
                    <div className="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center border border-gray-700 shadow-inner group-hover:border-gold-500/50 transition-colors">
                        <i className="fas fa-location-dot text-gold-500 text-lg"></i>
                    </div>
                    <div className="text-left">
                        <div className="text-base font-bold text-gray-100 group-hover:text-gold-400 transition-colors">Êñ∞ÊΩüÂ∏Ç (Niigata)</div>
                        <div className="text-[10px] text-gray-500 uppercase tracking-wider">ÈªûÊìäÊü•Áúã‰∏ÄÈÄ±Â§©Ê∞£</div>
                    </div>
                </div>
                
                {!loading && forecast.length > 0 && (
                    <div className="flex items-center gap-3 bg-black/20 px-3 py-1.5 rounded-lg border border-white/5">
                        <i className={`fas ${getWeatherInfo(forecast[0].code).icon} text-lg`}></i>
                        <div className="flex flex-col items-end leading-none">
                            <span className="text-xs font-mono text-gray-200">{forecast[0].minTemp}/{forecast[0].maxTemp}</span>
                        </div>
                    </div>
                )}
            </button>

            {/* Bottom Sheet Modal */}
            {isOpen && (
                <div className="fixed inset-0 z-[100] flex items-end justify-center sm:items-center">
                    {/* Backdrop */}
                    <div 
                        className="absolute inset-0 bg-black/80 backdrop-blur-sm"
                        onClick={() => setIsOpen(false)}
                    ></div>

                    {/* Modal Content */}
                    <div className="weather-modal-content relative w-full sm:max-w-md bg-luxury-gray rounded-t-3xl sm:rounded-2xl shadow-2xl overflow-hidden border-t sm:border border-gold-500/20 max-h-[85vh] flex flex-col mx-auto">
                        
                        {/* Header */}
                        <div className="flex-none bg-luxury-charcoal p-4 flex justify-between items-center border-b border-gray-700 shadow-md z-10">
                            <div className="flex items-center gap-2">
                                <div className="bg-gold-500/10 p-2 rounded-full">
                                    <i className="fas fa-cloud-sun text-gold-400"></i>
                                </div>
                                <div>
                                    <h3 className="text-white font-bold text-lg">Êñ∞ÊΩüÂ∏Ç‰∏ÄÈÄ±Â§©Ê∞£</h3>
                                    <p className="text-[10px] text-gray-400">Ë≥áÊñô‰æÜÊ∫ê: Êó•Êú¨Ê∞£Ë±°Âª≥ (JMA)</p>
                                </div>
                            </div>
                            <button 
                                onClick={() => setIsOpen(false)}
                                className="w-8 h-8 rounded-full bg-gray-800 text-gray-400 hover:text-white hover:bg-gray-700 flex items-center justify-center transition-colors"
                            >
                                <i className="fas fa-times"></i>
                            </button>
                        </div>

                        {/* Scrollable List */}
                        <div className="overflow-y-auto p-2 pb-8 sm:pb-2 bg-luxury-black/95">
                            {loading ? (
                                <div className="flex flex-col items-center justify-center py-12 text-gray-500">
                                    <i className="fas fa-circle-notch fa-spin text-2xl text-gold-500 mb-2"></i>
                                    <span className="text-xs">Êõ¥Êñ∞Ê∞£Ë±°Ë≥áÊñô‰∏≠...</span>
                                </div>
                            ) : (
                                <div className="space-y-2">
                                    {forecast.map((day, idx) => {
                                        const info = getWeatherInfo(day.code);
                                        return (
                                            <div key={idx} className="bg-luxury-charcoal/50 p-3 rounded-xl border border-gray-800 flex items-center justify-between">
                                                {/* Date & Icon */}
                                                <div className="flex items-center gap-4 w-1/3">
                                                    <div className="flex flex-col">
                                                        <span className={`text-sm font-bold ${idx===0 ? 'text-gold-400' : 'text-gray-300'}`}>
                                                            {getDayName(day.date)}
                                                        </span>
                                                        {idx === 0 && <span className="text-[10px] text-gold-600 font-bold">TODAY</span>}
                                                    </div>
                                                </div>

                                                {/* Weather Icon & POP */}
                                                <div className="flex flex-col items-center justify-center w-1/3">
                                                    <i className={`fas ${info.icon} text-2xl mb-1`}></i>
                                                    {day.pop !== '-' && (
                                                        <span className="text-[10px] font-bold text-blue-400 bg-blue-900/30 px-1.5 rounded-full">
                                                            <i className="fas fa-umbrella mr-1"></i>{day.pop}
                                                        </span>
                                                    )}
                                                </div>

                                                {/* Temps & Desc */}
                                                <div className="flex flex-col items-end w-1/3">
                                                    <div className="flex items-center gap-1 font-mono font-bold text-base">
                                                        <span className="text-blue-300">{day.minTemp}</span>
                                                        <span className="text-gray-600">/</span>
                                                        <span className="text-red-300">{day.maxTemp}</span>
                                                    </div>
                                                    <span className="text-[10px] text-gray-500 text-right line-clamp-1 max-w-full">
                                                        {day.text}
                                                    </span>
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            )}
            </React.Fragment>
        );
      };

      // 1. PlanView (Integrated Guide & Weather)
      const PlanView = () => {
        // Init activeDay from localStorage or default
        const [activeDay, setActiveDay] = useState(() => {
            return localStorage.getItem('niigata_active_day') || ITINERARY[0].date;
        });

        // Track expanded guide item
        const [expandedGuideId, setExpandedGuideId] = useState(null);

        useEffect(() => {
            localStorage.setItem('niigata_active_day', activeDay);
        }, [activeDay]);

        const getIcon = (type) => {
          switch (type) {
            case 'transport': return 'fa-plane-departure';
            case 'hotel': return 'fa-bed';
            case 'food': return 'fa-utensils';
            case 'activity': return 'fa-camera';
            case 'info': return 'fa-circle-info';
            default: return 'fa-circle';
          }
        };

        const selectedItinerary = ITINERARY.find(d => d.date === activeDay);

        const toggleGuide = (id) => {
            setExpandedGuideId(expandedGuideId === id ? null : id);
        }

        return (
          <div className="min-h-full bg-luxury-black">
            {/* Date Selector */}
            <div className="sticky top-0 bg-luxury-black/95 backdrop-blur-md z-20 border-b border-gray-800 py-4 px-2 overflow-x-auto no-scrollbar flex space-x-4">
              {ITINERARY.map((day) => (
                <button
                  key={day.date}
                  onClick={() => setActiveDay(day.date)}
                  className={`flex flex-col items-center min-w-[60px] p-2 rounded-xl border transition-all duration-300 ${
                    activeDay === day.date
                      ? 'bg-gold-500 border-gold-400 text-luxury-black shadow-lg shadow-gold-500/20'
                      : 'bg-luxury-charcoal border-gray-700 text-gray-400'
                  }`}
                >
                  <span className="text-xs font-bold uppercase tracking-wider">{day.dayOfWeek}</span>
                  <span className="text-lg font-serif font-bold">{day.date.split('/')[1]}</span>
                </button>
              ))}
            </div>

            {/* Weather Widget (5 Days) */}
            <div className="px-6 pt-6 pb-2">
                 <WeatherWidget />
            </div>

            {/* Timeline */}
            <div className="p-6 relative">
              <div className="absolute left-9 top-6 bottom-6 w-0.5 bg-gradient-to-b from-gold-500/0 via-gold-500/30 to-gold-500/0"></div>

              {selectedItinerary ? (
                <div className="space-y-8">
                  <div className="ml-10 mb-6">
                      <h2 className="text-2xl font-serif text-gold-400">{selectedItinerary.title}</h2>
                      <p className="text-gray-500 text-sm italic">{selectedItinerary.date}, 2026</p>
                  </div>

                  {selectedItinerary.items.map((item, index) => {
                    const guideData = item.guideId ? GUIDE_LOCATIONS.find(g => g.id === item.guideId) : null;
                    const isExpanded = expandedGuideId === item.guideId;

                    return (
                        <div key={index} className="relative flex items-start group">
                        <div className={`absolute left-0 w-7 h-7 rounded-full border-2 flex items-center justify-center z-10 bg-luxury-black ${
                            item.highlight ? 'border-gold-400 text-gold-400 shadow-[0_0_10px_rgba(212,175,55,0.4)]' : 'border-gray-600 text-gray-600'
                        }`}>
                            <i className={`fas ${getIcon(item.type)} text-xs`}></i>
                        </div>

                        <div className="ml-10 w-full">
                            <div className={`p-4 rounded-lg border backdrop-blur-sm transition-all duration-300 ${
                            item.highlight 
                                ? 'bg-gradient-to-br from-luxury-charcoal to-luxury-gray border-gold-400/50 shadow-md' 
                                : 'bg-luxury-charcoal/50 border-gray-800'
                            }`}>
                            <div className="flex justify-between items-start mb-1">
                                <span className={`text-xs font-bold px-2 py-0.5 rounded ${
                                item.highlight ? 'bg-gold-500 text-black' : 'bg-gray-700 text-gray-300'
                                }`}>
                                {item.time}
                                </span>
                            </div>
                            
                            <h3 className="text-lg font-bold text-gray-100 mt-2 mb-1">{item.title}</h3>
                            {item.description && (
                                <p className="text-sm text-gray-400 leading-relaxed font-sans whitespace-pre-line">{item.description}</p>
                            )}
                            
                            {/* MapCode & Location Link */}
                            <div className="flex flex-wrap gap-2 mt-3">
                                {item.mapCode && (
                                    <div className="text-[10px] text-gold-400 font-mono bg-luxury-black/50 px-2 py-1 rounded border border-gold-600/30">
                                        MAPCODE: {item.mapCode}
                                    </div>
                                )}
                                {item.locationLink && (
                                    <a 
                                    href={item.locationLink}
                                    target="_blank"
                                    rel="noreferrer"
                                    className="inline-flex items-center text-[10px] font-bold text-gray-400 hover:text-white transition-colors uppercase border border-gray-700 px-2 py-1 rounded bg-gray-800"
                                    >
                                    <i className="fas fa-map-marked-alt mr-1"></i> Âú∞Âúñ
                                    </a>
                                )}
                                {guideData && (
                                     <button 
                                        onClick={() => toggleGuide(item.guideId)}
                                        className={`inline-flex items-center text-[10px] font-bold px-2 py-1 rounded border transition-colors ${
                                            isExpanded 
                                            ? 'bg-gold-500 text-black border-gold-500' 
                                            : 'bg-gray-800 text-gold-400 border-gold-400/50 hover:bg-gold-500/10'
                                        }`}
                                     >
                                        <i className={`fas ${isExpanded ? 'fa-book-open' : 'fa-book'} mr-1`}></i> 
                                        {isExpanded ? 'Êî∂Ëµ∑‰ªãÁ¥π' : 'Ë©≥Á¥∞Ë≥áË®ä'}
                                     </button>
                                )}
                            </div>

                            {/* Expanded Guide Content */}
                            {guideData && isExpanded && (
                                <div className="mt-4 pt-4 border-t border-gray-700 animate-fadeIn">
                                    <div className="relative h-40 w-full rounded-lg overflow-hidden mb-3">
                                        <img src={guideData.imagePlaceholder} alt={guideData.title} className="w-full h-full object-cover" />
                                        <div className="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"></div>
                                        <div className="absolute bottom-2 left-2">
                                            <div className="text-gold-400 text-xs font-serif italic">{guideData.subtitle}</div>
                                        </div>
                                    </div>
                                    <div className="text-gray-300 text-sm leading-relaxed text-justify mb-3 whitespace-pre-wrap guide-content font-sans">
                                        {guideData.description}
                                    </div>
                                    {guideData.details && (
                                        <div className="grid grid-cols-2 gap-2">
                                        {guideData.details.map((detail, i) => (
                                            <div key={i} className="bg-luxury-black/60 p-2 rounded border border-gray-800">
                                            <div className="text-[10px] text-gray-500 uppercase">{detail.label}</div>
                                            <div className="text-xs text-white font-mono">{detail.value}</div>
                                            </div>
                                        ))}
                                        </div>
                                    )}
                                </div>
                            )}

                            </div>
                        </div>
                        </div>
                    );
                  })}
                </div>
              ) : (
                <div className="text-center text-gray-500 mt-10">Ë´ãÈÅ∏ÊìáÊó•Êúü</div>
              )}
            </div>
          </div>
        );
      };

      // 2. WalletView
      const WalletView = () => {
        const [rate, setRate] = useState(0.22);
        const [calcInput, setCalcInput] = useState('');
        const [calcResult, setCalcResult] = useState(null);
        
        const [expenses, setExpenses] = useState([]);
        const [newExpenseName, setNewExpenseName] = useState('');
        const [newExpenseAmount, setNewExpenseAmount] = useState('');
        const fileInputRef = useRef(null);

        useEffect(() => {
          const saved = localStorage.getItem('niigata_expenses');
          if (saved) {
            try {
              setExpenses(JSON.parse(saved));
            } catch (e) { console.error("Failed to load expenses"); }
          }
          
          const savedRate = localStorage.getItem('niigata_rate');
          if (savedRate) setRate(parseFloat(savedRate));
        }, []);

        useEffect(() => {
          localStorage.setItem('niigata_expenses', JSON.stringify(expenses));
        }, [expenses]);

        const handleRateChange = (val) => {
          const num = parseFloat(val);
          setRate(num);
          localStorage.setItem('niigata_rate', val);
        };

        const handleCalc = () => {
          try {
            if (!/^[0-9+\-*/.() ]+$/.test(calcInput)) return;
            const result = new Function('return ' + calcInput)();
            setCalcResult(result);
          } catch (e) {
            setCalcResult(null);
          }
        };

        const compressImage = (file) => {
          return new Promise((resolve) => {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = (event) => {
              const img = new Image();
              img.src = event.target.result;
              img.onload = () => {
                const canvas = document.createElement('canvas');
                const MAX_WIDTH = 600;
                const scaleSize = MAX_WIDTH / img.width;
                canvas.width = MAX_WIDTH;
                canvas.height = img.height * scaleSize;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                resolve(canvas.toDataURL('image/jpeg', 0.5));
              };
            };
          });
        };

        const addExpense = async () => {
          if (!newExpenseName || !newExpenseAmount) return;

          let imageBase64 = undefined;

          if (fileInputRef.current && fileInputRef.current.files && fileInputRef.current.files[0]) {
            imageBase64 = await compressImage(fileInputRef.current.files[0]);
          }

          const newExp = {
            id: Date.now().toString(),
            description: newExpenseName,
            amountJPY: parseFloat(newExpenseAmount),
            date: Date.now(),
            receiptImageBase64: imageBase64
          };

          setExpenses([newExp, ...expenses]);
          setNewExpenseName('');
          setNewExpenseAmount('');
          if (fileInputRef.current) fileInputRef.current.value = '';
        };

        const deleteExpense = (id) => {
          if(confirm('Á¢∫ÂÆöÂà™Èô§Ê≠§Á¥ÄÈåÑÔºü')) {
              setExpenses(expenses.filter(e => e.id !== id));
          }
        };

        const totalJPY = expenses.reduce((acc, curr) => acc + curr.amountJPY, 0);

        return (
          <div className="p-4 bg-luxury-black min-h-full space-y-6">
            
            <div className="bg-luxury-charcoal p-5 rounded-2xl border border-gold-500/20 shadow-lg">
              <h3 className="text-gold-400 font-serif mb-3">ÂåØÁéáÊèõÁÆó</h3>
              <div className="flex items-center space-x-2 mb-3">
                <span className="text-xs text-gray-500">ÂåØÁéá (Êó•Âπ£ÊèõÂè∞Âπ£):</span>
                <input 
                  type="number" 
                  value={rate}
                  onChange={(e) => handleRateChange(e.target.value)}
                  className="bg-luxury-black border border-gray-700 rounded px-2 py-1 w-20 text-right text-gold-100"
                  step="0.001"
                />
              </div>
              
              <div className="flex gap-2">
                  <input 
                      type="text" 
                      placeholder="‰æãÂ¶Ç 500+200*3" 
                      value={calcInput}
                      onChange={(e) => setCalcInput(e.target.value)}
                      className="flex-1 bg-luxury-black border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-600 font-mono text-lg"
                  />
                  <button 
                      onClick={handleCalc}
                      className="bg-gold-500 text-black px-4 rounded-lg font-bold"
                  >
                      =
                  </button>
              </div>

              {calcResult !== null && (
                  <div className="mt-3 flex justify-between items-center border-t border-gray-700 pt-3">
                      <div className="text-gray-400">Êó•Âπ£Á∏ΩÈ°ç: <span className="text-white font-bold">{Math.round(calcResult).toLocaleString()}</span></div>
                      <div className="text-gold-400 text-xl font-bold">NT$ {Math.round(calcResult * rate).toLocaleString()}</div>
                  </div>
              )}
            </div>

            <div className="bg-luxury-charcoal p-5 rounded-2xl border border-gray-800">
              <h3 className="text-white font-serif mb-4">Êñ∞Â¢ûË®òÂ∏≥</h3>
              <div className="space-y-3">
                  <input 
                      type="text" 
                      placeholder="ÂìÅÈ†ÖÂêçÁ®±" 
                      value={newExpenseName}
                      onChange={(e) => setNewExpenseName(e.target.value)}
                      className="w-full bg-luxury-black border border-gray-700 rounded p-3 text-white"
                  />
                  <div className="flex gap-2">
                      <input 
                          type="number" 
                          placeholder="Êó•Âπ£ÈáëÈ°ç" 
                          value={newExpenseAmount}
                          onChange={(e) => setNewExpenseAmount(e.target.value)}
                          className="flex-1 bg-luxury-black border border-gray-700 rounded p-3 text-white"
                      />
                      <label className="flex items-center justify-center bg-gray-800 w-12 rounded border border-gray-700 cursor-pointer hover:bg-gray-700">
                          <i className="fas fa-camera text-gold-400"></i>
                          <input 
                              type="file" 
                              ref={fileInputRef} 
                              accept="image/*" 
                              capture="environment" 
                              onChange={() => alert('ÁÖßÁâáÂ∑≤ÈÅ∏Êìá')}
                          />
                      </label>
                  </div>
                  <button 
                      onClick={addExpense}
                      className="w-full bg-gold-600 hover:bg-gold-500 text-black font-bold py-3 rounded transition-colors"
                  >
                      ÂÑ≤Â≠ò
                  </button>
              </div>
            </div>

            <div className="pb-8">
              <div className="flex justify-between items-end mb-2 px-2">
                  <h3 className="text-xl font-serif text-white">Ë®òÂ∏≥Á¥ÄÈåÑ</h3>
                  <span className="text-xs text-gold-400">Á∏ΩË®à: NT$ {(totalJPY * rate).toLocaleString()}</span>
              </div>
              
              <div className="space-y-3">
                  {expenses.length === 0 && <p className="text-center text-gray-600 py-4">ÁõÆÂâçÊ≤íÊúâÁ¥ÄÈåÑ</p>}
                  {expenses.map((exp) => (
                      <div key={exp.id} className="bg-luxury-charcoal p-4 rounded-xl border border-gray-800 flex justify-between items-center group">
                          <div className="flex items-center gap-3">
                              {exp.receiptImageBase64 ? (
                                  <img src={exp.receiptImageBase64} alt="Receipt" className="w-10 h-10 rounded object-cover border border-gray-600" />
                              ) : (
                                  <div className="w-10 h-10 rounded bg-gray-800 flex items-center justify-center">
                                      <i className="fas fa-receipt text-gray-600"></i>
                                  </div>
                              )}
                              <div>
                                  <div className="text-white font-medium">{exp.description}</div>
                                  <div className="text-xs text-gray-500">{new Date(exp.date).toLocaleDateString()}</div>
                              </div>
                          </div>
                          <div className="text-right">
                              <div className="text-gold-100 font-bold">¬•{exp.amountJPY.toLocaleString()}</div>
                              <div className="text-xs text-gray-500">NT$ {Math.round(exp.amountJPY * rate).toLocaleString()}</div>
                          </div>
                          <button 
                              onClick={() => deleteExpense(exp.id)}
                              className="ml-3 text-gray-600 hover:text-red-500"
                          >
                              <i className="fas fa-trash-alt"></i>
                          </button>
                      </div>
                  ))}
              </div>
            </div>
          </div>
        );
      };

      // 3. ListsView
      const ListsView = () => {
        const [todos, setTodos] = useState(PRE_TRIP_CHECKLIST);
        const [memos, setMemos] = useState([]);
        const [memoInput, setMemoInput] = useState('');
        const [activeTab, setActiveTab] = useState('todo');

        useEffect(() => {
          const savedTodos = localStorage.getItem('niigata_todos');
          if (savedTodos) setTodos(JSON.parse(savedTodos));
          
          const savedMemos = localStorage.getItem('niigata_memos');
          if (savedMemos) setMemos(JSON.parse(savedMemos));
        }, []);

        useEffect(() => {
          localStorage.setItem('niigata_todos', JSON.stringify(todos));
        }, [todos]);

        useEffect(() => {
          localStorage.setItem('niigata_memos', JSON.stringify(memos));
        }, [memos]);

        const toggleTodo = (id) => {
          setTodos(todos.map(t => t.id === id ? { ...t, completed: !t.completed } : t));
        };

        const addMemo = () => {
          if (!memoInput.trim()) return;
          const newMemo = {
            id: Date.now().toString(),
            content: memoInput,
            timestamp: Date.now()
          };
          setMemos([newMemo, ...memos]);
          setMemoInput('');
        };

        const deleteMemo = (id) => {
          setMemos(memos.filter(m => m.id !== id));
        };

        const renderContentWithLinks = (text) => {
          const urlRegex = /(https?:\/\/[^\s]+)/g;
          const parts = text.split(urlRegex);
          return parts.map((part, i) => {
              if (part.match(urlRegex)) {
                  return (
                      <a key={i} href={part} target="_blank" rel="noreferrer" className="text-gold-400 underline break-all">
                          {part.length > 30 ? part.substring(0, 30) + '...' : part} <i className="fas fa-external-link-alt text-xs ml-1"></i>
                      </a>
                  );
              }
              return part;
          });
        };

        return (
          <div className="min-h-full bg-luxury-black p-4">
            <div className="flex border-b border-gray-800 mb-6">
              <button 
                onClick={() => setActiveTab('todo')}
                className={`flex-1 py-3 text-center font-serif transition-colors ${activeTab === 'todo' ? 'text-gold-400 border-b-2 border-gold-400' : 'text-gray-500'}`}
              >
                Ë°åÂâçÊ∏ÖÂñÆ
              </button>
              <button 
                onClick={() => setActiveTab('memo')}
                className={`flex-1 py-3 text-center font-serif transition-colors ${activeTab === 'memo' ? 'text-gold-400 border-b-2 border-gold-400' : 'text-gray-500'}`}
              >
                ÂÇôÂøòÈåÑ
              </button>
            </div>

            {activeTab === 'todo' ? (
              <div className="space-y-3">
                {todos.map(todo => (
                  <div 
                      key={todo.id} 
                      onClick={() => toggleTodo(todo.id)}
                      className={`flex items-center p-4 rounded-xl border transition-all cursor-pointer ${
                          todo.completed 
                          ? 'bg-luxury-black border-gray-800 opacity-50' 
                          : 'bg-luxury-charcoal border-gray-700'
                      }`}
                  >
                      <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center mr-4 transition-colors ${
                          todo.completed ? 'bg-gold-500 border-gold-500 text-black' : 'border-gray-500'
                      }`}>
                          {todo.completed && <i className="fas fa-check text-xs"></i>}
                      </div>
                      <span className={`text-sm ${todo.completed ? 'line-through text-gray-500' : 'text-gray-200'}`}>
                          {todo.text}
                      </span>
                  </div>
                ))}
              </div>
            ) : (
              <div className="space-y-4">
                  <div className="bg-luxury-charcoal p-3 rounded-xl border border-gray-700">
                      <textarea 
                          value={memoInput}
                          onChange={(e) => setMemoInput(e.target.value)}
                          placeholder="Ëº∏ÂÖ•Á≠ÜË®òÊàñÁ∂≤ÂùÄ..."
                          className="w-full bg-transparent text-white outline-none min-h-[80px] resize-none placeholder-gray-600"
                      />
                      <div className="flex justify-end mt-2">
                          <button onClick={addMemo} className="bg-gold-600 text-black px-4 py-1.5 rounded text-sm font-bold">
                              Êñ∞Â¢û
                          </button>
                      </div>
                  </div>
                  
                  <div className="space-y-3">
                      {memos.map(memo => (
                          <div key={memo.id} className="bg-luxury-black border border-gray-800 p-4 rounded-xl relative group">
                              <button 
                                  onClick={() => deleteMemo(memo.id)}
                                  className="absolute top-2 right-2 text-gray-700 hover:text-red-500 p-2"
                              >
                                  <i className="fas fa-times"></i>
                              </button>
                              <div className="text-gray-300 text-sm whitespace-pre-wrap pr-6">
                                  {renderContentWithLinks(memo.content)}
                              </div>
                              <div className="text-[10px] text-gray-600 mt-2">
                                  {new Date(memo.timestamp).toLocaleString()}
                              </div>
                          </div>
                      ))}
                      {memos.length === 0 && <div className="text-center text-gray-600 py-10">Â∞öÁÑ°Á≠ÜË®ò</div>}
                  </div>
              </div>
            )}
          </div>
        );
      };

      // 4. InfoView (Removed Weather)
      const InfoView = () => {
        const ContactCard = ({ icon, title, number, desc }) => (
          <div className="flex items-center bg-luxury-charcoal p-4 rounded-xl border border-gray-800 mb-3">
            <div className="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center mr-4 border border-gold-500/30">
              <i className={`fas ${icon} text-gold-400`}></i>
            </div>
            <div className="flex-1">
              <h4 className="text-white font-bold">{title}</h4>
              {desc && <p className="text-xs text-gray-500">{desc}</p>}
            </div>
            {number && (
              <a href={`tel:${number}`} className="bg-gray-800 text-gold-400 px-3 py-1 rounded text-sm font-mono border border-gray-700">
                {number}
              </a>
            )}
          </div>
        );

        return (
          <div className="p-4 bg-luxury-black min-h-full">
              <h2 className="text-2xl font-serif text-gold-400 mb-6">ÊóÖÈÅäË≥áË®ä</h2>

              <section className="mb-8">
                  <h3 className="text-sm font-bold text-gray-500 uppercase tracking-widest mb-3">Á∑äÊÄ•ËÅØÁµ° (Êó•Êú¨)</h3>
                  <ContactCard icon="fa-shield-halved" title="Ë≠¶ÂØüÂ±Ä" number="110" />
                  <ContactCard icon="fa-truck-medical" title="ÊïëË≠∑Ëªä / Ê∂àÈò≤Â±Ä" number="119" />
                  <ContactCard icon="fa-building-columns" title="Âè∞ÂåóÈßêÊó•Á∂ìÊøüÊñáÂåñ‰ª£Ë°®Ëôï" desc="TECO Japan" />
              </section>

              <section className="mb-8">
                  <h3 className="text-sm font-bold text-gray-500 uppercase tracking-widest mb-3">ÈÅïÁ¶ÅÂìÅ / Ê≥®ÊÑè‰∫ãÈ†Ö</h3>
                  <div className="bg-red-900/20 border border-red-900/50 rounded-xl p-4">
                      <ul className="space-y-2 text-sm text-gray-300">
                          <li className="flex items-start"><i className="fas fa-ban text-red-500 mt-1 mr-2"></i> Á¶ÅÊ≠¢ÊîúÂ∏∂ËÇâÈ°ûË£ΩÂìÅ (È¶ôËÖ∏„ÄÅËÇâ‰πæ)</li>
                          <li className="flex items-start"><i className="fas fa-ban text-red-500 mt-1 mr-2"></i> Á¶ÅÊ≠¢ÊîúÂ∏∂Êñ∞ÈÆÆËî¨Êûú</li>
                          <li className="flex items-start"><i className="fas fa-triangle-exclamation text-yellow-500 mt-1 mr-2"></i> Ê∂≤È´îË∂ÖÈÅé 100ml ÈúÄË®óÈÅã</li>
                      </ul>
                  </div>
              </section>

              <div className="mt-12 text-center">
                  <p className="text-[10px] text-gray-700 font-serif italic">Designed for 2026 Êñ∞ÊΩü‰πãÊóÖ</p>
              </div>
          </div>
        );
      };

      // --- MAIN APP ---
      const App = () => {
        const [currentView, setCurrentView] = useState('PLAN');

        const renderView = () => {
          switch (currentView) {
            case 'PLAN': return <PlanView />;
            case 'WALLET': return <WalletView />;
            case 'LISTS': return <ListsView />;
            case 'INFO': return <InfoView />;
            default: return <PlanView />;
          }
        };

        const NavItem = ({ view, icon, label }) => (
          <button
            onClick={() => setCurrentView(view)}
            className={`flex flex-col items-center justify-center w-full py-3 transition-colors duration-300 ${
              currentView === view ? 'text-gold-400' : 'text-gray-500 hover:text-gray-300'
            }`}
          >
            <i className={`fas ${icon} text-lg mb-1`}></i>
            <span className="text-[10px] tracking-widest font-sans font-bold">{label}</span>
          </button>
        );

        return (
          <div className="flex flex-col h-screen bg-luxury-black text-white overflow-hidden">
            {/* Top Bar */}
            <header className="flex-none px-6 py-4 bg-luxury-charcoal border-b border-gold-400/20 shadow-lg z-10 flex items-center justify-between">
              <div>
                <h1 className="text-xl font-serif text-gold-400 tracking-wider">NIIGATA</h1>
                <p className="text-[10px] text-gray-400 font-sans tracking-[0.2em] uppercase">2026 ÂÜ¨Â≠£Â•¢ËèØ‰πãÊóÖ</p>
              </div>
              <div className="w-8 h-8 rounded-full border border-gold-400/50 flex items-center justify-center">
                  <i className="fas fa-snowflake text-gold-400 text-xs animate-pulse"></i>
              </div>
            </header>

            {/* Main Content */}
            <main className="flex-1 overflow-y-auto overflow-x-hidden relative bg-luxury-black scroll-smooth">
              <div className="pb-20"> 
                {renderView()}
              </div>
            </main>

            {/* Bottom Nav */}
            <nav className="flex-none fixed bottom-0 w-full bg-luxury-charcoal border-t border-gold-400/20 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.3)] pb-safe z-50">
              <div className="flex justify-around items-center px-2">
                <NavItem view="PLAN" icon="fa-calendar-days" label="Ë°åÁ®ã" />
                <NavItem view="WALLET" icon="fa-wallet" label="Ë®òÂ∏≥" />
                <NavItem view="LISTS" icon="fa-list-check" label="Ê∏ÖÂñÆ" />
                <NavItem view="INFO" icon="fa-circle-info" label="Ë≥áË®ä" />
              </div>
            </nav>
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>